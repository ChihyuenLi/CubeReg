# v1.22.2

- [add] 支持配置keep alive

# v1.22.1

- [add] 支持云函数灰度发布
- [add] customUserId放开更多字符

# v1.22.0

- [add] `tcb.registerExtension()`，注册扩展
- [add] `tcb.invokeExtension()`，使用扩展
- [add] 签名方式支持v3选项

# v1.21.2
- [fix] database aggregate match操作传参EJSON序列化

# v1.21.1
- [add] request支持更多细节耗时
- [add] 支持getAuthContext


# v1.20.0
- [add] 新增TCB 入口静态方法parseContext（解析云函数context参数）

# v1.19.1
- [fix] database 事务 修复runTransaction api中rollback报错 & 改造runTransaction 支持自定义返回

# v1.19.0
- [add] database 新增事务

# v1.18.0
- [add] wx 支持微信支付云调用

# v1.17.0
- [fix] database 查询 limit限制由最大100放至1000

# v1.16.3
- [fix] 修复 TRIGGER_SRC 变量取值问题

# v1.16.2
- [fix] 修复 db 函数在 handler 外初始化问题

# v1.16.1
- [fix] 修复定时触发 API Token 可能失效的问题

# v1.16.0
- [fix] db 模块 替换lodash为子模块
- [fix] db 模块 更改query传参，为入参必须为对象，且value不能均为undefined
- [fix] 修复app.database(env:'xxx') 不生效问题

# v1.15.0
- [add] 加入执行操作符：expr、jsonSchema
- [add] 加入逻辑操作符：not

# v1.14.0
- [add] 新增cls日志写入

# v1.13.0
- [add] 加入查询操作符：all、elemMatch、exists、size、mod
- [add] 加入更新操作符：push、pull、pullAll、addToSet、rename、max、min
- [add] 加入 db.command.aggregate.pipeline，用于生产 Aggregate.lookup() 的 pipeline 参数
- [add] db.command.aggregate.match 支持传入 query

# v1.12.0
- [add] 加入db.command.project，支持投影操作符
- [add] 加入db.command.nor

# v1.11.0
- [add] 新增获取客户端IP的接口
- [add] `auth().getUserInfo()` 返回字段中加入 `customUserId`

# v1.10.0
- [add] 新增获取登录凭据Ticket的接口

# v1.9.0
- [add] 新增聚合搜索接口

# v1.8.0
- [add] 新增getCurrentEnv方法

# v1.6.0
- [add] 新增auth api
- [add] 文件上传直传

# v1.4.2
- [fixed] 修复了doc.set()对于复杂错误类型的签名错误问题
- [fixed] db.serverDate()支持new调用

# v1.4.1
- [fixed] 修复了下载文件接口如果文件名称中有中文会